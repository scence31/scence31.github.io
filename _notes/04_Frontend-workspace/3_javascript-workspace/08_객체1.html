<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>객체1</title>
    <style>
        .area {
            background-color: skyblue;
            border: 1px solid black;
        }

        .small {
            height: 250px;
        }
        .big {
            height: 450px;
        }
    </style>
</head>
<body>

    <h1>* 객체</h1>

    <p>
        - 자바스크립트에서의 객체는 중괄호를 이용해서 생성하고,
        이 중괄호 안에 이 객체에서 필요로 하는 속성들을 정의한다 <br>
        - 속성들은 각각 속성명: 속성값 형태로 제시(키 : 밸류) <br>
        - 속성값으로는 모든 자료형의 값을 다 담을 수 잇다.
    </p>

    <pre>
        [표현법]

        var 변수명 = {
            속성명 : 속성값,
            속성명 : 속성값,
            ...

        }
    </pre>

    <!-- 
        * 명심할 사항!

        - 자바스크립트의 배열: 인덱스개념 있음, 값만 저장, 중복 가능,
        사이즈제한 없음, 아무타입이나 다 저장 가능
        => ArrayList 유사

        - 자바스크립트의 객체: 속석명 + 속성값 (키+밸류) 세트로 저장,
        저장순서 유지 안댐, 인덱스 없음, 속성명은 중복안댐, 속성값은 중복댐
        사이즈제한 없음, 속성값은 아무타입 저장가능
        => HashMap 유사

        - 추후 웹개발 시 자바 데이터를 프론트엔드로 전달할 때
        ArrayList에 담긴 데이터를 프론트로 보내면 자바스크립트 배열로 받을 수 있음
        HashMap을 보내면 자바스크립트 객체로 받음
        (상호 호환 가능 == JSON)
    -->

    <button onclick="test1();">실행확인</button>

    <div id="area1" class="area big"></div>

    <script>
        function test1() {

            // 자바스크립트의 배열(배열객체)
            var arr = ["Dry Mango", 4000, "pickle", ["mango", "sugar"]];

            // 자바스크립트의 객체
            let product = {
                pName : "Dry Mango",
                price : 4000,
                kind: "pickle",
                ingredient: ["mango", "sugar"]
            };
            // 현실세계의 말린망고 객체 하나를 자바스크립트 객체로 표현한 꼴
            // (객체지향프로그래밍이 가능)

            console.log(arr);
            console.log(typeof(arr)); // object
            console.log(product);
            console.log(typeof(product)); // object

            const area1 = document.getElementById("area1");

            area1.innerHTML = "arr: " + arr/*.toString()*/ + "<br>";
            area1.innerHTML = "product: " + product + "<br>";
            // 객체는 데이터가 출력 안되고 [object Object] 이렇게 출력

            //배열의 각 인덱스에 접근하고 싶다면?
            // 배열명[인덱스]
            area1.innerHTML += "0번 인덱스 데이터: " + arr[0] + "<br>";
            // 0번 인덱스에서 마지막 인덱스까지 규칙 찾아서 반복문 활용 가능

            // 객체의 각 속성에 접근하고싶다면?
            // 방법 1) 배열처럼 대괄호 이용
            // 객체명["속성명"]
            area1.innerHTML += "product['pName'] : " + product["pName"] + "<br>";
            area1.innerHTML += "product['price'] : " + product["price"] + "<br>";
            area1.innerHTML += "product['kind'] : " + product["kind"] + "<br>";
            area1.innerHTML += "product['ingredient'] : " + product["ingredient"]/*.toString()*/ + "<br>";
            area1.innerHTML += "product['ingredient'][1] : " + product["ingredient"][1] + "<br>";

            // 방법 2) .을 이용해서 직접접근
            // 객체명,속성명
            area1.innerHTML += "<b>방법2. 객체명.속성명 으로 접근</b><br>";
            area1.innerHTML += "product.pName : " + product.pName + "<br>";
            area1.innerHTML += "product.price : " + product.price + "<br>";
            area1.innerHTML += "product.kind : " + product.kind + "<br>";
            area1.innerHTML += "product.ingredient : " + product.ingredient/*.toString()*/ + "<br>";
            area1.innerHTML += "product.ingredient[0] : " + product.ingredient[0] + "<br>";
        }
    </script>

    <br><hr>

    <h3>객체생성 특이케이스</h3>

    <h4> - 객체 생성시, 속성명을 제시할 때 반드시 문자열로 해야하는 케이스</h4>

    <button onclick="test2();">실행확인</button>

    <div id="area2" class="area small"></div>

    <script>
        function test2() {

            // 속성명 제시할 때 공백 or 특수문자 포함된 경우
            // 속성명을 문자열로 제시해야 함
            var user = {
                "user name": "홍길동",
                "age!!": 20,
                address: "서울시"
            };

            console.log(user);

            var area2 = document.getElementById("area2");

            // 객체의 각 속성값을 div 안에 출력해보기
            /*
            area2.innerHTML = "user name: " + user.user name + "<br>";
            area2.innerHTML = "age!!: " + user.age!! + "<br>";
            area2.innerHTML = "address: " + user.address + "<br>";
            */
           // 속성명 안에 특수기호나 공백문자가 있는 경우
           // 객체명.속성명으로 속성값을 불러올 수 없음

           // 객체명["속성명"] 이렇게 해야댐
           area2.innerHTML = "user name: " + user["user name"] + "<br>";
           area2.innerHTML += "age!!: " + user["age!!"] + "<br>";
           area2.innerHTML += "address: " + user["address"] + "<br>";
           
             
        }
    </script>
    
    <br><hr>

    <h3>객체에서 반복문 활용</h3>

    <!-- 자바에서 HashMap에 반복문 활용 불가!!
         - 인덱스 개념이 없기 때문  
         - HashMap을 Set으로 변환 후 반복문 사용 (keySet, entrySet 등)
    -->

    <p>
        자바스크립트의 객체가 가지고 있는 모든 속성들에 대해  
        순차적으로 접근하고자 한다면 반복문을 제시할 수 있음! <br>
        단, 객체에서는 인덱스 개념이 없기 때문에 일반 for문은 불가하고,  
        for in 문은 사용 가능!!
    </p>

    <button onclick="test3();">실행확인</button>

    <div id="area3" class="area small"></div>

    <script>
        function test3() {
            var area3 = document.getElementById("area3");

            // 배열의 경우
            let arr = ["김갑생", 10, true];

            // 일반 for문
            /*
            for(let i = 0; i < arr.length; i++) {
                area3.innerHTML += arr[i] + "<br>";
            }
            */
            // for in문
            for (let i in arr) { // i = 0, 1, 2 인덱스 수가 담김
                area3.innerHTML += arr[i] + "<br>";
            }

            // for in문에서 in 뒤에 배열을 제시한 경우에는
            // 앞쪽 변수에 0 ~ 마지막 인덱스까지 그 인덱스 수 자체가 담김!!

            area3.innerHTML += "<hr>";

            // 객체의 경우
            const game = {
                title: "오버워치",
                price: 30000,
                language: "한국어 지원",
                supportOS: ["windows32", "windows64"],
                service: true
            };

            // 객체는 인덱스 개념이 없기 때문에 일반 for문 사용 불가!!

            // for in문
            // for(변수선언문 in 배열명) : 배열에 반복 돌릴 때
            // for(변수선언문 in 객체명) : 객체에 반복 돌릴 때

            for (let key in game) {
                // key = "title", "price", "language", "supportOS", "service"
                // 객체에 for in문 적용시 앞쪽 변수에 매번 속성명이 담겨옴

                // console.log(key);

                // 객체명.속성명 => 안됨
                // area3.innerHTML += game.key + "<br>";
                // undefined만 뜸
                // 진짜 game 객체의 key 이름의 속성명을 찾음

                // 객체명["속성명"]
                area3.innerHTML += game[key] + "<br>";
                // 제대로 접근됨
            }       
        }
    </script>

    <br><hr>

    <h3>★★★객체의 속성값으로 함수를 제시하는 경우★★★</h3>

    <p>
        - 객체의 속성 중 속성값을 메소드로 제시할 수 있다. (익명함수로) <br>
        - 이 때, 속성값이 함수 자료형인 경우 해당 속성을 "메소드 속성" 이라고 부른다. <br>
        - 객체명.메소드속성명(); 로 호출할 수 있다.
    </p>

    <button onclick="test4();">실행확인</button>

    <div id="area4" class="area small"></div>

    <script>
        function test4() {
            let area4 = document.getElementById("area4");

            let name = "홍길동";

            let dog = {
                name : "토토",
                kind : "푸들",
                eat : function(food) {

                    /*
                    area4.innerHTML = "eat 메소드가 호출되었습니다.<br>";
                    area4.innerHTML += "강아지가 먹은 음식 : " + food + "<br>";
                    */

                    // "푸들종류인 토토가 사과를 먹고있어요" 형태로 출력
                    area4.innerHTML = dog.kind + "종류인" + dog.name + "가" + food + "를 먹고있어요<br>";
                    // dog.name 대신 name 하면 홍길동 나옴(중괄호 확인)
                    // dog 대신 this로 바꿔도 됨
                    // 지역변수 조심(메소드명만 호출하면~)
                }
            };

            // dog 객체의 eat 메소드 호출해보기
            // 객체명.속성명();
            dog.eat("사과");
        }
    </script>

    <br><hr>

    <h3>in과 with 키워드</h3>

    <p>
        - in: 객체 내에 해당 속성이 존재하는지 확인해주는 키워드로, 존재하면 true or false <br>
        - with: 객체명을 반복해서 제시하는 것을 생략하게 함
    </p>

    <!-- 위에서 배운 메소드속성을 연습하면서 테스트-->

    이름: <input type="text" id="name"> <br>
    국어: <input type="number" id="kor"> <br>
    수학: <input type="number" id="math"> <br>
    영어: <input type="number" id="eng"> <br>

    <button onclick="test5();">실행확인</button>

    <div id="area5" class="area big"></div>

    <script>
        function test5() {

            // 사용자로부터 입력받은 이름, 국어, 수학, 영어점수를 변수에 담기
            let name = document.getElementById("name").value; // "홍길동"
            let kor = Number(document.getElementById("kor").value); // "90" => 90
            let math = Number(document.getElementById("math").value); // 
            let eng = Number(document.getElementById("eng").value); // 

            // console.log(name, kor, math, eng);

            // 이름, 점수를 객체로 묶어서 표현 => 현실세계 학생 한명 정보 표현
            let student = {
                name : name,
                kor : kor,
                math : math,
                eng : eng,
                getSum : function() {

                    return this.kor + this.math + this.eng;
                },
                getAvg : function() {
                    
                    // return (this.kor + this.math + this.eng) / 3;
                    return this.getSum() / 3;
                },
                toString: function() {

                    return this.name + ", " + this.kor + ", " + this.math + ", " + this.eng;

                }
            };

            const area5 = document.getElementById("area5");

            area5.innerHTML = "student: " + student + "<br>";
            area5.innerHTML += "student : " + student.name + ", " + student.kor
                                + ", " + student.math + ", " + student.eng + "<br>";
            area5.innerHTML += "sum: " + student.getSum() + "<br>";
            area5.innerHTML += "avg: " + student.getAvg() + "<br>";
            area5.innerHTML += "toString: " + student.toString() + "<br>";
            
            // ---------------------------------------

            // in 키워드
            // [표현법]
            // "속성명" in 객체명
            
            area5.innerHTML += "<hr>";
            area5.innerHTML += "student에 name 속성 있니?: " + ("name" in student) + "<br>";

            // -----------------------------------------

            // with 키워드

            area5.innerHTML += "<hr>";
            /*
            area5.innerHTML += "학생이름: " + student.name + "<br>";
            area5.innerHTML += "국어점수: " + student.kor + "<br>";
            area5.innerHTML += "수학점수: " + student.math + "<br>";
            area5.innerHTML += "영어점수: " + student.eng + "<br>";
            area5.innerHTML += "점수총합: " + student.getSum() + "<br>";
            area5.innerHTML += "점수평균: " + student.getAvg() + "<br>";
            */
            with(student) {
                area5.innerHTML += "학생이름: " + name + "<br>";
                area5.innerHTML += "국어점수: " + kor + "<br>";
                area5.innerHTML += "수학점수: " + math + "<br>";
                area5.innerHTML += "영어점수: " + eng + "<br>";
                area5.innerHTML += "점수총합: " + getSum() + "<br>";
                area5.innerHTML += "점수평균: " + getAvg() + "<br>";
            }
        }
    </script>

    <br><hr>

    <h3>객체의 속성추가 및 제거</h3>

    <button onclick="test6();">실행확인</button>

    <div id="area6" class="area small"></div>

    <script>
        function test6() {

            const student = {}; // 빈 객체 생성

            // console.log(student); // {}

            // 빈 객체에 속성을 추가
            // (참고) 자바의 HashMap에서는 put 메소드를 통해서 추가했었음!!

            // > 자바스크립트의 객체에서는
            //   객체명.속성명 = 값;
            student.name = "홍길똥";
            student.hobby = ["게임", "독서"];
            student.dream = "프로게이머";
            student.age = 20;

            student.dream = "프로그래머";
            // 속성명 중복되면 덮어쓰임

            // console.log(student);

            // 이거 안댐 with(student) {}

            let area6 = document.getElementById("area6");
           
            area6.innerHTML = "student : " + student + "<br>";

            // 메소드속성 또한 추가 가능
            student.toString = function() {

                let str = "name : " + this.name + "<br>"
                        + "hobby : " + this.hobby + "<br>"
                        + "dream : " + this.dream + "<br>"
                        + "age : " + this.age;

                return str;
            }

            area6.innerHTML += "student : " + student + "<br>";

            // 객체의 속성 제거
            // > delete 함수를 이용해서 제거
            // [ 표현법 ]
            // delete(객체명.속성명);
            delete(student.hobby);

            area6.innerHTML += "student : " + student + "<br>";
            // > 삭제된 hobby 값이 undefined 로 출력됨

            /*
                - 자바스크립트 객체 또한 const 선언해도 속성 추가/삭제 가능
                - 메모리의 stack에는 주소값이, heap에는 실제 속성값이 저장되는 구조
                - stack 영역 주소값은 고정, heap 영역의 내용만 변경되기 때문.
                - 자바스크립트에도 객체의 깊은복사 개념 있음
            */

        }
    </script>





</body>
</html>

<br><br><br><br><br><br><br><br><br><br><br><br>