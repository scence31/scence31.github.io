---
title: "[Java] 배열(Array)"
date: 2025-12-29 14:00:00 +0900
categories: [Backend, Java]
tags: [java, array, copy]
---

## 배열
데이터가 많아지면 변수를 일일이 만들기 힘듦. 이때 같은 타입의 값들을 묶어서 관리하는 것

* **표현법**: `int[] arr = new int[3];`
* **흐름**:
    1. **배열 선언**: Stack 영역에 `arr`이라는 빈 상자가 만들어짐
    2. **배열 할당**: `new` 구문을 통해 Heap 영역에 방이 3개 만들어짐
    3. **선언/할당 연결**: Heap에 생긴 방의 주소값이 Stack의 `arr` 상자에 저장됨

> 인덱스는 항상 0부터 시작함! `arr[3]`을 호출하면 `ArrayIndexOutOfBoundsException` 에러 뜸

---

## 배열 사용하는 이유
편리+효율성 때문
1. 변수가 많아질 때 일일이 나열할 필요 없음
2. `for`문과 연계해서 반복 처리가 가능(수학적 계산이 가능해짐)
**단점**: 처음에 정한 크기를 중간에 바꿀 수 없음(바꾸려면 `new`로 새로 만들어야 함)

```java
// 대표 패턴
for(int i = 0; i < arr.length; i++) {
    System.out.println(arr[i]);
}
```

## 얕은 복사 vs 깊은 복사

1. **얕은 복사(Shallow Copy)**
   - 주소값만 복사
   - 복사본을 수정하면 원본도 같이 변함 (결국 같은 Heap 영역을 가리키기 때문!)

2. **깊은 복사(Deep Copy)**
   - 새로운 배열을 만들고 내부의 값들을 일일이 복사
   - 복사본을 수정해도 원본은 안전

### ✅ 깊은 복사 방법 4가지
1. for문: 노가다지만 가장 직관적
2. System.arraycopy(): 코드는 길지만 속도가 빠름
3. clone(): 가장 간단하지만 가끔 제약이 있음
4. **Arrays.copyOf()**: 가장 많이 쓰임